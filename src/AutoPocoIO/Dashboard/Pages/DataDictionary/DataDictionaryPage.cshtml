@* Generator: Template TypeVisibility: internal GeneratePrettyNames: True DisableLinePragmas: true  Namespace: AutoPocoIO.Dashboard.Pages *@

@using AutoPocoIO.Middleware
@using AutoPocoIO.Dashboard.ViewModels;
@inherits RazorPage

<div class="container pt-4 mt-5">
    <h1>
        Connectors
    </h1>
    <hr />
    <table class="table table-hover selectable mt-5">
        <thead>
            <tr class="table-secondary">
                <th>Connector Name</th>
                <th>Connector Type</th>
                <th>Server</th>
                <th>Database Name</th>
                <th>Schema</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var row in (IEnumerable<ConnectorViewModel>)ViewBag["Connectors"])
            {
                <tr class="clickable-row" data-url="@TransformUrl("/DataDictionary/Schema/")@row.Id">
                    <td>@row.Name</td>
                    <td>
                        @switch (row.ResourceType)
                        {
                            case 1:@("SQL")
                                break;
                            case 4: @("MySQL")
                                break;
                            case 2: @("Oracle")
                                break;
                        }
                    </td>
                    <td>@row.DataSource</td>
                    <td>@row.InitialCatalog</td>
                    <td>@row.Schema</td>
                </tr>
            }
        </tbody>
    </table>
</div>

@section script
    {
    <script>
        jQuery(document).ready(function ($) {
            $(".clickable-row").click(function () {
                window.location = $(this).data("url");
            });
        });
    </script>
}